<app-header></app-header>

<!-- Section principale avec image et texte -->
<div class="banner">
  <!-- Image d'arri√®re-plan ind√©pendante -->
  <img src="banniere.png" class="bg-banner" alt="background" />

  <div class="container content">
    <div class="row align-items-center">
      <!-- Texte √† gauche -->
      <div class="col-md-6 text-content">
        <h1>
          SMBSA <span class="highlight">Ennouhoudh</span>, c≈ìur
          <span class="highlight">agricole</span>
        </h1>
        <p>
          Depuis 1965, nous accompagnons les agriculteurs et <br>
          p√™cheurs de Nabeul avec des services essentiels : collecte de <br>
          lait, fournitures agricoles, stockage et accompagnement.
        </p>
        <button class="btn btn-brown" type="button" (click)="scrollToInvest()">Devenir Membre</button>
        <button class="btn btn-link" type="button" (click)="openPopup()">En Savoir Plus <i class="fas fa-arrow-right"></i></button>

     <!-- ‚úÖ POPUP de Description SMBSA -->
<div class="popup-overlay" *ngIf="showPopup" (click)="closePopup()">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="popup-close" (click)="closePopup()">‚úñ</button>

    <!-- Logo centr√© -->
    <img src="Logo.png" alt="SMBSA Logo" class="popup-logo" />

    <!-- Contenu HTML dynamique -->
    <div class="popup-html" [innerHTML]="htmlContent"></div>
  </div>
</div>

      
    </div>



      <!-- Image plante √† droite -->
      <div class="col-md-6 image-side" style="margin-top: 56px;">
        <img src="plante-shadow.png" class="plant-image" alt="Plante" />
      </div>
    </div>
  </div>
</div>



<!-- Section Nouveaut√©s -->
<!-- Section Nouveaut√©s avec Carousel -->
<section class="nouveautes-section" style="margin-bottom: -80px;">
  <div class="container">
    <h2 class="section-title">Nouveaut√©s</h2>

    <p-carousel [value]="nouveautes" [numVisible]="3" [numScroll]="1" [circular]="true" [autoplayInterval]="0000"
      [responsiveOptions]="[
          { breakpoint: '1024px', numVisible: 3, numScroll: 3 },
          { breakpoint: '768px', numVisible: 2, numScroll: 1 },
          { breakpoint: '560px', numVisible: 1, numScroll: 1 }
        ]">
      <ng-template pTemplate="item" let-nouveaute>
        <div class="card nouveaute-card">

          <!-- Image ou Fichier -->
          <ng-container *ngIf="nouveaute.typeFichier === 'IMAGE'; else fichierBlock">
            <img [src]="nouveaute.image" class="image-style" alt="Image nouveaut√©" />

          </ng-container>

          <ng-template #fichierBlock>
            <img src="annoncement.jpg" class="image-style" alt="fichier pdf" />
            <h5 class="card-title" *ngIf="nouveaute.typeFichier === 'PDF'">
              {{ nouveaute.titre }}
            </h5>
            <a style="text-align: center; margin-top: 10px;" *ngIf="nouveaute.typeFichier === 'PDF'" [href]="'data:application/pdf;base64,' + nouveaute.fichierPdf"
              [download]="nouveaute.titre">
              T√©l√©charger le PDF
            </a>
          </ng-template>


          <div class="card-body">
            <h5 class="card-title" *ngIf="nouveaute.typeFichier === 'IMAGE'">
              {{ nouveaute.titre }}
            </h5>

            <button *ngIf="nouveaute.typeFichier === 'IMAGE'" class="btn-details " (click)="voirDetailsNouv(nouveaute)">
              <i class="pi pi-eye"></i> Voir D√©tails
            </button>


            <p class="date"><b style="font-size: medium; color: black;">Publi√© le {{ nouveaute.datePublication }}</b>
            </p>
          </div>
        </div>
      </ng-template>
    </p-carousel>
  </div>
</section>


<!-- Nos Services -->
<section class="services-section">
  <h2 class="section-title">Nos Services</h2>
  <div class="service-cards">
    <div class="service-card">
      <i class="fas fa-glass-whiskey"></i>
      <h4>Collecte et vente de lait</h4>
      <p>Service professionnel de collecte et de commercialisation du lait.</p>
      <button class="btn-links" type="button">+ En Savoir Plus </button>
    </div>
    <div class="service-card">
      <i class="fas fa-leaf"></i>
      <h4>Fournitures agricoles</h4>
      <p>Acc√®s aux meilleurs approvisionnements agricoles.</p>
      <button class="btn-links" type="button">+ En Savoir Plus </button>
    </div>
    <div class="service-card">
      <i class="fas fa-tractor"></i>
      <h4>Mat√©riel agricole</h4>
      <p>Location et vente de mat√©riel agricole moderne.</p>
      <button class="btn-links" type="button">+ En Savoir Plus </button>
    </div>
    <div class="service-card">
      <i class="fas fa-user-cog"></i>
      <h4>Accompagnement</h4>
      <p>Formation et assistance technique personnalis√©e.</p>
      <button class="btn-links" type="button">+ En Savoir Plus </button>
    </div>
  </div>
</section>

<!-- Pourquoi nous rejoindre -->
<section class="reasons-section">
  <div class="reasons-cards">

    <h2 class="section-title">Pourquoi nous rejoindre?</h2>

    <div class="reasons-list">
      <div class="reason">
        <i class="fas fa-tools"></i>
        <h5>Services Exclusifs</h5>
        <p>Acc√®s √† une gamme compl√®te de services agricoles professionnels</p>
      </div>
      <div class="reason">
        <i class="fas fa-coins"></i>
        <h5>Avantages Financiers</h5>
        <p>Tarifs pr√©f√©rentiels et support financier pour nos membres</p>
      </div>
      <div class="reason">
        <i class="fas fa-users"></i>
        <h5>Communaut√©</h5>
        <p>Rejoignez une communaut√© de +100 membres actifs</p>
      </div>
    </div>

  </div>
</section>


<!-- Section Comment adh√©rer -->
<section class="adhesion-section">
  <div class="containe">
    <h2 class="adhesion-title">Comment adh√©rer √† <span class="highlight">SMBSA Ennouhoudh</span></h2>

    <div class="steps-wrapper">
      <div class="step" *ngFor="let step of steps">
        <div class="icon-circle">
          <i [class]="step.icon"></i>
        </div>
        <div class="text-step">
          <h5>{{ step.title }}</h5>
          <p>{{ step.description }}</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Section Investissement -->
<section class="invest-section" id="invest">
  <div class="containerr invest-content text-center">
    <p class="intro-text">
      Investissez dans SMBSA, investissez dans votre agricole <br />
      boostez votre <span class="green-bold">productivit√©</span>,
      <span class="green-bold">r√©coltes</span> and
      <span class="green-bold">opportunit√©s</span>
    </p>

    <button class="btn btn-brown mt-3" type="button" (click)="ouvrirFormulaire()">Demande d'adh√©sion</button>

    <!-- Formulaire modal -->
    <app-demande-adhesion [show]="showForm" (fermer)="fermerFormulaire()"></app-demande-adhesion>

    <div class="advantages mt-4">
      <div class="advantage">
        <i class="fas fa-check"></i>
        <span>Cr√©ation de compte rapide</span>
      </div>
      <div class="advantage">
        <i class="fas fa-check"></i>
        <span>Participez √† un r√©seau solide de producteurs</span>
      </div>
      <div class="advantage">
        <i class="fas fa-check"></i>
        <span>Rejoignez plus de 100 adh√©rents!</span>
      </div>
    </div>
  </div>
</section>




<!-- ‚úÖ POPUP D√âTAIL NOUVEAUT√â -->
<div class="popup-overlay" *ngIf="selectedNouveaute" (click)="closeDetails()">
  <div class="popup-nouveaute" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeDetails()">‚úñ</button>

    <h2 class="popup-title">{{ selectedNouveaute.titre }}</h2>

    <div class="popup-content">
      <!-- Image -->
      <img *ngIf="selectedNouveaute.typeFichier === 'IMAGE'" 
           [src]="selectedNouveaute.image"
           class="popup-image"
           alt="Image nouveaut√©" />

      <!-- PDF -->
      <a *ngIf="selectedNouveaute.typeFichier === 'PDF'" 
         [href]="'data:application/pdf;base64,' + selectedNouveaute.fichierPdf"
         target="_blank"
         class="btn-pdf">
         üìÑ Ouvrir le PDF
      </a>

      <!-- Description -->
      <p class="popup-description">{{ selectedNouveaute.description }}</p>

    </div>
  </div>
</div>

<app-footer></app-footer>