<div class="dashboard-container" *ngIf="!loading">

  <!-- ðŸ”µ Chiffre dâ€™affaires -->
  <!-- <div class="main-highlight">
    <div class="highlight-card">
      <h2>Chiffre d'affaires</h2>
      <p class="highlight-value">{{ stats.chiffreAffaires | number:'1.0-2' }} DT</p>
    </div>
  </div> -->

  <div class="kpi-header">
    <div class="ca-block">
      <h4>Chiffre d'affaire total</h4>
      <h1>{{ stats.totalCA | number:'1.0-0' }} DT</h1>
      <p 
  [ngClass]="{
    'text-success': stats.croissancePourcent >= 0,
    'text-danger': stats.croissancePourcent < 0
  }"
  class="variation"
>
  <span *ngIf="stats.croissancePourcent >= 0">ðŸ“ˆ</span>
  <span *ngIf="stats.croissancePourcent < 0">ðŸ“‰</span>
  {{ stats.croissancePourcent | number:'1.2-2' }}% ce mois
</p>

  
    </div>

    <div class="kpi-cards">
      <div class="kpi-card">
        <h5>CA Actuel ( ce mois ) </h5>
        <p class="text-muted">{{ stats.caActuel | number:'1.0-0' }} DT</p>
    
      <!-- Affichage CA mois prÃ©cÃ©dent -->
      
      </div>
      <div class="kpi-card">
        <h5>CA Precedent</h5>
        <p class="text-muted">{{ stats.caPrecedent | number:'1.0-0' }} DT</p>
      </div>
      <div class="kpi-card">
        <h5>N Transferts</h5>
        <p>{{ stats.nombreActionsVendues }}</p>
      </div>

      <div class="kpi-card">
        <h5>PrÃ©vision Annuelle</h5>
        <p>{{ stats.previsionCA | number:'1.0-0' }} DT</p>
      </div>
    </div>
  </div>


  <!-- ðŸŸ¢ Cartes secondaires -->
  <div class="small-cards">
    <div class="small-card">
      <h4>Reste Cotisation</h4>
      <p>{{ stats.resteCotisation | number:'1.0-2' }} DT</p>
    </div>
    <div class="small-card">
      <h4>AdhÃ©rents Actifs</h4>
      <p>{{ stats.nbAdherents }}</p>
    </div>
    <div class="small-card">
      <h4>Valeur Part</h4>
      <p>{{ stats.valeurPart }} DT</p>
    </div>
   
<!-- Carte des demandes totales -->
<div class="small-card">
  <h4>Demandes Totales Recues</h4>
  <p>{{ stats.nbAdhesions }}</p>
  
  <!-- Pop-up affichÃ© au hover -->
 <!-- Card pop-up avec Ã©tat des demandes -->
<div class="popup">
  <div class="popup-content">
    <h4>Ã‰tat des demandes</h4>
    <div class="popup-details">
      <div class="detail valid">
        <span class="icon"></span>
        <span>ValidÃ©s</span>
        <span>{{ stats.nbDemandesValidees }}</span>
      </div>
      <div class="detail refuse">
        <span class="icon"></span>
        <span>RefusÃ©s</span>
        <span>{{ stats.nbDemandesRefusees }}</span>
      </div>
      <div class="detail pending">
        <span class="icon"></span>
        <span>En attente</span>
        <span>{{ stats.nbDemandesEnAttente }}</span>
      </div>
    </div>
  </div>
</div>

</div>





  </div>

  <!-- ðŸŸ£ Graphiques -->
  <div class="charts">
    <div class="chart-card">
      <p-chart type="doughnut" [data]="repartitionSexe"></p-chart>
      <h4>RÃ©partition par genre</h4>
    </div>
    <div class="chart-card">
      <p-chart type="bar" [data]="repartitionAgeBar" [options]="optionsBar"></p-chart>
      <h4>RÃ©partition par Ã¢ge</h4>
    </div>
  </div>



</div>

<div *ngIf="loading" class="loading">Chargement...</div>