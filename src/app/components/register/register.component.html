<div class="container-fluid register-container">
  <div class="row vh-100">
    <!-- Section Gauche -->
    <div class="col-md-6 text-center d-flex justify-content-center align-items-center">
      <div>
        <div class="logo mb-2">
          <img src="Logo.png" alt="SMBSA Logo" class="img-fluid" />
        </div>

        <!-- Étape 1 : Vérifier le CIN -->
        <div class="register-box" *ngIf="!cinValide && !errorMessage">
          <h2 class="mb-4">Commencez Maintenant</h2>
          <form #cinForm="ngForm">
            <div class="form-group mb-3">
              <label for="cin">CIN</label>
              <input
                type="text"
                class="form-control"
                id="cin"
                [(ngModel)]="cin"
                name="cin"
                placeholder="Entrez votre CIN"
                required
              />
            </div>
            <button type="button" class="btn btn-success" (click)="checkCIN()">next</button>
          </form>
        </div>

        <!-- Étape 2 : Mot de passe -->
        <div class="register-box" *ngIf="cinValide">
          <h2 class="mb-4">Continuer Votre Inscription</h2>
          <form #passwordForm="ngForm" (ngSubmit)="register()">
            <div class="form-group mb-3">
              <label for="email">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                [(ngModel)]="email"
                name="email"
                required
              />
            </div>

            <div class="form-group mb-3">
              <label for="password">Mot de passe</label>
              <input
                type="password"
                class="form-control"
                id="password"
                [(ngModel)]="password"
                name="password"
                required
              />
            </div>

            <div class="form-group mb-3">
              <label for="confirmPassword">Confirmer mot de passe</label>
              <input
                type="password"
                class="form-control"
                id="confirmPassword"
                [(ngModel)]="confirmPassword"
                name="confirmPassword"
                required
              />
            </div>

            <button type="submit" class="btn btn-success" [disabled]="!passwordForm.form.valid">
              Sign up
            </button>
          </form>
        </div>

        <!-- Message d'erreur -->
        <div class="error-box" *ngIf="errorMessage">
          <p class="error-message">
            Votre demande n'a pas encore été acceptée ou vous n'avez pas encore
            effectué une demande.
          </p>
          <button class="btn btn-success" (click)="goToHome()">
            Page d'accueil
          </button>
        </div>
      </div>
    </div>

    <!-- Section Droite -->
    <div class="col-md-6 d-none d-md-block right-section">
      <div class="image-container">
        <img src="hand-leaf.png" alt="Nature" class="img-fluid full-screen-image" />
      </div>
    </div>
  </div>
</div>
